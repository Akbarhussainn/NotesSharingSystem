
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>View Notes — Notes Sharing System</title>
  <link rel="stylesheet" href="../style.css">
  <style>
    :root{
      --bg: linear-gradient(135deg, #0f2027, #203a43);
      --card-bg: rgba(255,255,255,0.06);
      --accent: #00c6ff;
      --glass: rgba(255,255,255,0.06);
      --radius: 12px;
      --gap: 20px;
      --max-width: 1200px;
      --text: #e9f2f7;
    }

    html,body { height:100%; }
    body{
      margin:0;
      min-height:100vh;
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg);
      color:var(--text);
      display:flex;
      justify-content:center;
      align-items:flex-start;
      padding:40px 16px;
    }

    .page {
      width:100%;
      max-width:var(--max-width);
      z-index:1;
    }

    header {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      margin-bottom:24px;
    }

    h1{
      font-size:1.25rem;
      margin:0;
      font-weight:600;
    }
    .controls {
      display:flex;
      gap:12px;
      align-items:center;
    }

    .search {
      display:flex;
      align-items:center;
      gap:8px;
      background:var(--glass);
      padding:8px 12px;
      border-radius:999px;
      box-shadow:0 4px 14px rgba(0,0,0,0.25);
    }

    .search input{
      border:0;
      outline:none;
      background:transparent;
      color:var(--text);
      font-size:0.95rem;
      width:260px;
      min-width:140px;
    }

    .notes-grid {
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap:var(--gap);
      align-items:start;
    }

    .note-card{
      background: var(--card-bg);
      border-radius:var(--radius);
      padding:18px;
      text-align:left;
      backdrop-filter: blur(8px);
      transition:transform .18s ease, box-shadow .18s ease;
      box-shadow: 0 6px 18px rgba(0,0,0,0.35);
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .note-card:focus-within,
    .note-card:hover { transform:translateY(-6px); box-shadow:0 12px 30px rgba(0,0,0,0.45); }

    .note-card h3 { margin:0; color:var(--accent); font-size:1rem; }
    .meta { font-size:0.85rem; color:rgba(255,255,255,0.7); }

    .actions {
      margin-top:auto;
      display:flex;
      gap:8px;
    }
    .btn {
      background:var(--accent);
      color:#082025;
      border:0;
      padding:8px 12px;
      border-radius:8px;
      font-weight:600;
      cursor:pointer;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }
    .btn.secondary {
      background:transparent;
      color:var(--text);
      border:1px solid rgba(255,255,255,0.06);
    }

    .no-results {
      text-align:center;
      padding:40px 0;
      color:rgba(255,255,255,0.8);
      grid-column:1 / -1;
    }

    /* highlight matched text */
    mark.match {
      background:rgba(255,198,0,0.18);
      color:var(--accent);
      padding:0 2px;
      border-radius:2px;
    }

    @media (max-width:520px){
      .search input{ width:140px; }
      header{ flex-direction:column; align-items:flex-start; gap:12px; }
    }
  </style>
</head>
<body>
  <div class="page" role="main">
    <header>
      <h1>Notes</h1>

      <div class="controls" aria-hidden="false">
        <label class="search" for="searchInput">
          <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path fill="currentColor" d="M9.5 3A6.5 6.5 0 1 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0-2A8.5 8.5 0 1 0 18 9.5 8.5 8.5 0 0 0 9.5 1z"/><path fill="currentColor" d="M21 21l-5.2-5.2"/></svg>
          <input id="searchInput" type="search" placeholder="Search notes — title or author" aria-label="Search notes" />
        </label>
      </div>
    </header>

    <section aria-live="polite" aria-atomic="true" id="resultsStatus" class="visually-hidden" style="height:0; overflow:hidden"></section>

    <section class="notes-grid" id="notesGrid" aria-label="Available notes">
      <!-- note items (can be rendered server-side or injected client-side) -->
      <article class="note-card" data-title="Mathematics - Integration Notes">
        <h3>Mathematics - Integration Notes</h3>
        <div class="meta">By: Prof. Sharma</div>
        <p class="sr-only">Subject: Mathematics. Topic: Integration.</p>
        <div class="actions">
          <a class="btn" href="#" download>Download</a>
          <button class="btn secondary" type="button">Take Test</button>
        </div>
      </article>

      <article class="note-card" data-title="Physics - Laws of Motion">
        <h3>Physics - Laws of Motion</h3>
        <div class="meta">By: Prof. Rishi</div>
        <div class="actions">
          <a class="btn" href="#" download>Download</a>
          <button class="btn secondary" type="button">Take Test</button>
        </div>
      </article>

      <article class="note-card" data-title="Computer Science - AI Basics">
        <h3>Computer Science - AI Basics</h3>
        <div class="meta">By: Prof. Dalit</div>
        <div class="actions">
          <a class="btn" href="#" download>Download</a>
          <button class="btn secondary" type="button">Take Test</button>
        </div>
      </article>

      <!-- no-results placeholder -->
      <div id="noResults" class="no-results" hidden>No notes match your search.</div>
    </section>

    <p style="text-align:center; margin-top:28px">
      <a href="../index.html" style="color:var(--accent); text-decoration:none">← Back to Home</a>
    </p>
  </div>

  <script>
    // Minimal, efficient client-side search with debounce and accessible live updates.
    (function () {
      const input = document.getElementById('searchInput');
      const grid = document.getElementById('notesGrid');
      const cards = Array.from(grid.querySelectorAll('.note-card'));
      const noResults = document.getElementById('noResults');
      const resultsStatus = document.getElementById('resultsStatus');

      // helper: escape regex special chars
      function escapeRE(s){ return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }

      function setLive(text){
        resultsStatus.textContent = text;
      }

      function highlight(element, query){
        const h3 = element.querySelector('h3');
        const original = h3.textContent;
        if (!query) { h3.innerHTML = original; return; }
        const re = new RegExp('('+escapeRE(query)+')','ig');
        h3.innerHTML = original.replace(re, '<mark class="match">$1</mark>');
      }

      function filter(q){
        const qNorm = (q||'').trim().toLowerCase();
        let visible = 0;
        cards.forEach(card => {
          const title = (card.dataset.title || card.textContent || '').toLowerCase();
          const match = qNorm === '' || title.includes(qNorm);
          card.hidden = !match;
          if (match) { visible++; highlight(card, qNorm); } else highlight(card, '');
        });
        noResults.hidden = visible > 0;
        setLive(visible === 0 ? 'No results' : visible + ' note' + (visible>1?'s':'') + ' shown');
      }

      // debounce
      let timer = null;
      input.addEventListener('input', function (e) {
        clearTimeout(timer);
        timer = setTimeout(() => filter(this.value), 180);
      });

      // keyboard: '/' focuses search (common pattern)
      window.addEventListener('keydown', (e) => {
        if (e.key === '/' && document.activeElement !== input) {
          e.preventDefault();
          input.focus();
          input.select();
        }
      });

      // initial announce
      setLive(cards.length + ' notes available');
    })();
  </script>
</body>
</html>
